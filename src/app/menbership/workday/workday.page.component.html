<div class="container my-5">
  <!-- Header avec date centrÃ©e et bouton Ã  droite -->
  <pre>{{ store.mode() }}</pre>
  <div class="row align-items-center mb-4">
    <div class="col-md-4"></div>
    <div class="col-md-4 text-center">
      <h6 class="mb-2">Working Day</h6>
      <input
        data-test="date-input"
        type="date"
        class="form-control"
        [value]="store.date()"
        (change)="store.updateDate($event)"
        [disabled]="store.isExecutionMode()"
      />
      @if (store.isExecutionMode()) {
       <div class="d-flex flex-column align-items-center mt-2">
        <div class="progress w-100" data-testid="workday-progress">
          <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar"
            [style.width.%]="store.pomodoroProgress()" [attr.aria-valuenow]="store.pomodoroProgress()" aria-valuemin="0"
            aria-valuemax="100">
            {{store.pomodoroProgress()}}%
          </div>
        </div>
        <p class="small text-muted mt-2 text-center w-100">{{ store.progress() }} seconds have passed.</p>
      </div>
      }
    </div>
    @if (store.hasTaskPlanned() && store.isEditmode()) {
      <div
        class="col-md-4 text-end mt-3 mt-md-0"
        data-test="start-workday-button"
      >
        <button
          class="btn btn-success rounded-pill px-4 py-2 fw-bold"
          (click)="store.startWorkday()"
        >
          Start the work day
        </button>
      </div>
    }
  </div>

  <!-- Afficher un message si la liste des tÃ¢ches est vide -->
  @if (store.hasNoTaskPlanned()) {
    <div class="text-center my-5" data-testid="inbox-zero-placeholder">
      <div class="mb-3" style="font-size: 4rem; opacity: 0.6">ðŸ“‹</div>
      <h5 class="text-muted">Rien de prÃ©vu pour aujourd'hui !</h5>
    </div>
  } @else {
    <!-- TÃ¢che la plus importante -->
    @for (task of store.taskList(); track $index) {
      @if ($index === 0) {
        <h6 class="mb-3 text-muted">Most important task</h6>
      }
      @if ($index === 1) {
        <h6 class="mb-3 text-muted">TÃ¢che de seconde importance</h6>
      }
      @if ($index === 3) {
        <h6 class="mb-3 text-muted">TÃ¢ches restantes</h6>
      }

       @if(store.isEditmode()) {
      <app-taskfield
        [task]="task"
        [index]="$index"
        (taskUpdated)="store.updateTask($index, $event)"
        (taskRemoved)="store.removeTask($index)"
      />
       }
      @if(store.isExecutionMode()) {
      <app-task-readonly
        [task]="task"
        [index]="$index"
      />
       }
    }

  <!-- Ajouter une tÃ¢che -->
  <div class="text-center">
    @if (store.isButtonDisplayed()) {
      <button
        data-testid="add-task-button"
        class="btn btn-link text-muted"
        (click)="store.addTask()"
      >
        Ajouter une tÃ¢che
      </button>
    }
  </div>
  }
</div>
